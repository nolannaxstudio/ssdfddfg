<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Backrooms - Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  font-family:Orbitron, sans-serif;
}
body{
  margin:0;
  background:radial-gradient(circle at top, #2b2b00,#000000);
  color:#f5f5a0;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.panel{
  width:90%;
  max-width:900px;
  background:rgba(0,0,0,0.85);
  border:2px solid #d6d600;
  border-radius:20px;
  padding:20px;
  box-shadow:0 0 30px #000;
  animation: appear 0.8s ease-in-out;
}
@keyframes appear{
  from{transform:scale(0.7);opacity:0}
  to{transform:scale(1);opacity:1}
}

h1,h3{text-align:center}

button{
  background:#d6d600;
  border:none;
  padding:12px 16px;
  margin:5px 0;
  border-radius:10px;
  cursor:pointer;
  font-weight:bold;
  width:100%;
}
button:hover{background:#ffff00}

input{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  margin-bottom:10px;
  font-size:15px;
}

#log{
  background:black;
  padding:10px;
  border-radius:10px;
  height:130px;
  overflow:auto;
  font-size:13px;
}

.hidden{display:none}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="panel" id="loginPanel">
  <h1>ğŸ”’ AccÃ¨s Admin Backrooms</h1>
  <input 
     type="password" 
     id="adminPass" 
     placeholder="Code admin"
     oninput="this.value = this.value.replace(/./g,'â€¢')"
  >
  <button onclick="login()">Entrer</button>
  <div id="loginMsg" style="text-align:center;margin-top:10px;"></div>
</div>

<!-- ADMIN -->
<div class="panel hidden" id="adminPanel">
  <h1>ğŸ® Backrooms â€” Panneau Admin</h1>

  <div class="section">
    <h3>ğŸµ Commande Musique</h3>
    <p>Dans Roblox : <b>/music ID</b></p>
    <ul>
      <li>/music 1843529634</li>
      <li>/music 9123456789</li>
      <li>/music 5566778899</li>
    </ul>
  </div>

  <div class="section">
    <h3>ğŸ‘» Actions rapides</h3>
    <button onclick="send('spawnMonster')">Spawn monstre</button>
    <button onclick="send('killAll')">Kill all</button>
    <button onclick="send('fogOn')">Brouillard ON</button>
    <button onclick="send('fogOff')">Brouillard OFF</button>
  </div>

  <div class="section">
    <h3>ğŸ“¢ Message global</h3>
    <input id="msg" placeholder="Message Ã  envoyer au jeu">
    <button onclick="send('broadcast')">Envoyer</button>
  </div>

  <div class="section">
    <h3>ğŸ“œ Logs</h3>
    <div id="log"></div>
  </div>
</div>

<script>
let ADMIN_CODE = "";
let REAL_INPUT = "";
let connected = false;

// Charger le mot de passe depuis mdp.txt
fetch("mdp.txt")
  .then(r => r.text())
  .then(t => {
     ADMIN_CODE = t.trim();
     console.log("Code chargÃ©.");
  })
  .catch(() => {
     document.getElementById("loginMsg").textContent = "âŒ mdp.txt introuvable";
  });

// RÃ©cupÃ©rer ce que l'utilisateur tape (sans les points)
document.getElementById("adminPass").addEventListener("keydown", e=>{
  if(e.key === "Backspace"){
    REAL_INPUT = REAL_INPUT.slice(0,-1);
  } 
  else if(e.key.length === 1){
    REAL_INPUT += e.key;
  }
});

// LOGIN
function login(){
  if(REAL_INPUT === ADMIN_CODE){
    document.getElementById('loginPanel').classList.add('hidden');
    document.getElementById('adminPanel').classList.remove('hidden');
    log("âœ… ConnectÃ© comme admin");
    connected = true;
  } else {
    document.getElementById('loginMsg').textContent = "âŒ Mauvais code";
  }
}

// COMMANDE VERS SERVEUR/WEBHOOK
function send(action){
  if(!connected) return;

  let data = {action:action};

  if(action === "broadcast"){
    data.message = document.getElementById("msg").value;
  }

  fetch("TON_URL_WEBHOOK_OU_SERVEUR",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(data)
  }).then(()=>{
    log("âœ… EnvoyÃ© : " + action);
  }).catch(()=>{
    log("âŒ Erreur d'envoi");
  });
}

// LOG VISUEL
function log(text){
  const d = document.createElement("div");
  d.textContent = text;
  document.getElementById("log").appendChild(d);
}
</script>

</body>
</html>
